<div class="signup-root">
  <div class="signup-image-col">
    <img src="assets/shutterstock-1976973020-1@2x.png" alt="Sign up visual" class="signup-image" />
    <div class="image-overlay-text">
      <p [innerHTML]="'imageText' | i18n"></p>
    </div>
  </div>
  <div class="signup-form-col">
    <div class="header-bar">
      <div class="logo-container">
        <img src="assets/Monizze_Positive.svg" alt="Monizze Logo" class="company-logo">
      </div>
      <div class="language-selector-container">
        <div class="language-selector">
          <select 
            #languageSelect
            class="language-dropdown" 
            name="selectedLanguage" 
            [(ngModel)]="selectedLanguage" 
            (change)="onLanguageChange()"
            style="background: transparent !important; background-color: transparent !important; background-image: none !important; border: none !important; border-radius: 0 !important; outline: none !important; box-shadow: none !important; -webkit-appearance: none !important; -moz-appearance: none !important; appearance: none !important; padding: 0 !important; margin: 0 !important; min-width: 60px !important; font-size: 1rem !important; font-weight: 500 !important; color: #333 !important; cursor: pointer !important;">
            <option *ngFor="let lang of availableLanguages" [value]="lang.code">
              {{ lang.name }}
            </option>
          </select>
          <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" (click)="openLanguageDropdown(languageSelect)" style="cursor: pointer;">
            <path d="M4 6L8 10L12 6" stroke="#666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>
    
    <div class="signup-card">
      <div class="signup-card-content">
        <!-- Back button -->
        <button class="back-button" (click)="goBack()">
          <span class="back-arrow">‚Üê</span>
          {{ 'back' | i18n }}
        </button>

        <!-- Title section -->
        <h2 class="sign-up-title">{{ 'signUpToContinue' | i18n }}</h2>
        <h1 class="tco-converter-title">TCO Converter</h1>

        <!-- Signup form -->
        <form class="signup-form" (ngSubmit)="onSubmit()">
          <!-- Full Name -->
          <div class="form-group">
            <label for="fullName" class="form-label">{{ 'fullName' | i18n }}</label>
            <div class="input-container" [class.valid]="fullName && !fullNameError">
              <input 
                type="text" 
                id="fullName" 
                name="fullName"
                class="form-input"
                [placeholder]="'addYourFullName' | i18n"
                [(ngModel)]="fullName"
                (input)="onFullNameChange()"
                required
              >
              <div class="validation-icon" *ngIf="fullName && !fullNameError">
                <span class="checkmark">‚úì</span>
              </div>
            </div>
            <div class="error-message" *ngIf="fullNameError">
              {{ fullNameError }}
            </div>
          </div>

          <!-- Email Address -->
          <div class="form-group">
            <label for="email" class="form-label">{{ 'emailAddress' | i18n }}</label>
            <div class="input-container" [class.valid]="email && !emailError">
              <input 
                type="email" 
                id="email" 
                name="email"
                class="form-input"
                [placeholder]="'addYourEmailAddress' | i18n"
                [(ngModel)]="email"
                (input)="onEmailChange()"
                required
              >
              <div class="validation-icon" *ngIf="email && !emailError">
                <span class="checkmark">‚úì</span>
              </div>
            </div>
            <div class="error-message" *ngIf="emailError">
              {{ emailError }}
            </div>
          </div>

          <!-- Phone Number -->
          <div class="form-group">
            <label for="phone" class="form-label">{{ 'phoneNumber' | i18n }}</label>
            <div class="phone-input-container">
              <div class="country-selector">
                <select class="country-dropdown" name="selectedCountry" [(ngModel)]="selectedCountry">
                  <option value="+32">üáßüá™ +32</option>
                  <option value="+31">üá≥üá± +31</option>
                  <option value="+33">üá´üá∑ +33</option>
                  <option value="+49">üá©üá™ +49</option>
                </select>
              </div>
              <div class="phone-input-wrapper" [class.valid]="phoneNumber && !phoneNumberError">
                <input 
                  type="tel" 
                  id="phone" 
                  name="phone"
                  class="form-input phone-input"
                  [placeholder]="'addYourPhoneNumber' | i18n"
                  [(ngModel)]="phoneNumber"
                  (input)="onPhoneNumberChange()"
                  required
                >
                <div class="validation-icon" *ngIf="phoneNumber && !phoneNumberError">
                  <span class="checkmark">‚úì</span>
                </div>
              </div>
            </div>
            <div class="error-message" *ngIf="phoneNumberError">
              {{ phoneNumberError }}
            </div>
          </div>

          <!-- Social Secretary -->
          <div class="form-group">
            <label for="socialSecretary" class="form-label">{{ 'socialSecretary' | i18n }}</label>
            <div class="input-container" [class.valid]="socialSecretary && !socialSecretaryError">
              <select 
                id="socialSecretary" 
                name="socialSecretary"
                class="form-input"
                [(ngModel)]="socialSecretary"
                (change)="onSocialSecretaryChange()"
                required
              >
                <option value="" disabled [selected]="!socialSecretary">{{ 'chooseYourSocialSecretary' | i18n }}</option>
                <option value="acerta">Acerta</option>
                <option value="liantis">Liantis</option>
                <option value="partena">Partena Professional</option>
                <option value="securex">Securex</option>
                <option value="sdworx">SD Worx</option>
              </select>
              <div class="validation-icon" *ngIf="socialSecretary && !socialSecretaryError">
                <span class="checkmark">‚úì</span>
              </div>
            </div>
          </div>

          <!-- Company Number -->
          <div class="form-group">
            <label for="companyNumber" class="form-label">{{ 'companyNumber' | i18n }}</label>
            <div class="input-container" [class.valid]="companyNumber && !companyNumberError">
              <input 
                type="text" 
                id="companyNumber" 
                name="companyNumber"
                class="form-input"
                [placeholder]="'addYourCompanyNumber' | i18n"
                [(ngModel)]="companyNumber"
                (input)="onCompanyNumberChange()"
                required
              >
              <div class="validation-icon" *ngIf="companyNumber && !companyNumberError">
                <span class="checkmark">‚úì</span>
              </div>
            </div>
            <div class="error-message" *ngIf="companyNumberError">
              {{ companyNumberError }}
            </div>
            
            <!-- Company Information Display -->
            <div class="company-info" *ngIf="companyInfo && !companyNumberError">
              <div class="company-info-header">
                <span class="company-info-icon">üè¢</span>
                <span class="company-info-title">{{ 'companyFound' | i18n }}</span>
              </div>
              <div class="company-info-content">
                <div class="company-name">{{ companyInfo.name }}</div>
                <div class="company-address">{{ companyInfo.address }}</div>
                <div class="company-vat">VAT: {{ companyInfo.vatNumber }}</div>
              </div>
            </div>

            <!-- Company Name Input (when VIES lookup fails or returns invalid data) -->
            <div class="company-name-input" *ngIf="showCompanyNameInput">
              <label for="companyName" class="form-label">{{ 'companyName' | i18n }}</label>
              <div class="input-container" [class.valid]="companyName && !companyNameError">
                <input 
                  type="text" 
                  id="companyName" 
                  name="companyName"
                  class="form-input"
                  [placeholder]="'addYourCompanyName' | i18n"
                  [(ngModel)]="companyName"
                  (input)="onCompanyNameChange()"
                  required
                >
                <div class="validation-icon" *ngIf="companyName && !companyNameError">
                  <span class="checkmark">‚úì</span>
                </div>
              </div>
              <div class="error-message" *ngIf="companyNameError">
                {{ companyNameError }}
              </div>
            </div>
            
            <!-- Loading indicator -->
            <div class="loading-indicator" *ngIf="isLookingUpCompany">
              <span class="loading-spinner">‚è≥</span>
              <span class="loading-text">{{ 'lookingUpCompany' | i18n }}</span>
            </div>
          </div>

          <!-- Submit button -->
          <button 
            type="submit" 
            class="submit-button"
            [disabled]="!isFormValid() || isSubmitting"
          >
            <span *ngIf="!isSubmitting">{{ 'signUp' | i18n }}</span>
            <span *ngIf="isSubmitting">{{ 'sending' | i18n }}</span>
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
