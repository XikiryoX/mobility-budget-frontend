<div class="user-sessions-root">
  <!-- Header Bar -->
  <div class="header-bar">
    <div class="logo-container">
      <img src="assets/Monizze_Positive.svg" alt="Monizze Logo" class="company-logo">
    </div>
    <div class="language-selector-container">
      <div class="language-selector">
        <select 
          #languageSelect
          class="language-dropdown" 
          name="selectedLanguage" 
          [(ngModel)]="selectedLanguage" 
          (change)="onLanguageChange()"
          style="background: transparent !important; background-color: transparent !important; background-image: none !important; border: none !important; border-radius: 0 !important; outline: none !important; box-shadow: none !important; -webkit-appearance: none !important; -moz-appearance: none !important; appearance: none !important; padding: 0 !important; margin: 0 !important; min-width: 60px !important; font-size: 1rem !important; font-weight: 500 !important; color: #333 !important; cursor: pointer !important;">
          <option *ngFor="let lang of availableLanguages" [value]="lang.code">
            {{ lang.name }}
          </option>
        </select>
        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" (click)="openLanguageDropdown(languageSelect)" style="cursor: pointer;">
          <path d="M4 6L8 10L12 6" stroke="#666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="content-wrapper">
      <!-- Header -->
      <div class="page-header">
        <h1 class="page-title">{{ 'mySessions' | i18n }}</h1>
        <p class="page-subtitle">{{ 'manageYourSessions' | i18n }}</p>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>{{ 'loadingSessions' | i18n }}</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !isLoading" class="error-state">
        <p class="error-message">{{ error }}</p>
        <button class="retry-button" (click)="loadUserSessions()">
          {{ 'retry' | i18n }}
        </button>
      </div>

      <!-- Sessions List -->
      <div *ngIf="!isLoading && !error" class="sessions-container">
        <!-- New Session Button -->
        <div class="new-session-section">
          <button class="new-session-button" (click)="onNewSession()">
            <svg class="plus-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>{{ 'createNewSession' | i18n }}</span>
          </button>
        </div>

        <!-- Sessions List -->
        <div *ngIf="userSessions.length > 0" class="sessions-list">
          <div *ngFor="let session of userSessions" class="session-card" (click)="onSessionClick(session)">
            <div class="session-header">
              <div class="session-info">
                                  <h3 class="session-title">{{ 'session' | i18n }} #{{ session.id.slice(0, 8) }}</h3>
                <p class="session-company" *ngIf="session.signup?.companyName">
                  {{ session.signup?.companyName }}
                </p>
              </div>
              <div class="session-status">
                <span class="status-badge" [class]="getStatusColorClass(session.status)">
                  {{ getStatusDisplayText(session.status) }}
                </span>
              </div>
            </div>

            <div class="session-details">
              <div class="detail-item">
                <span class="detail-label">{{ 'currentStep' | i18n }}:</span>
                <span class="detail-value">{{ session.currentStep }}/5</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">{{ 'lastActivity' | i18n }}:</span>
                                    <span class="detail-value">{{ session.lastActivityAt ? formatDate(session.lastActivityAt) : '' }}</span>
              </div>
              <div class="detail-item" *ngIf="session.submittedAt">
                <span class="detail-label">{{ 'submitted' | i18n }}:</span>
                                    <span class="detail-value">{{ session.submittedAt ? formatDate(session.submittedAt) : '' }}</span>
              </div>
            </div>

            <div class="session-actions">
              <button class="continue-button">
                {{ 'continue' | i18n }}
                <svg class="arrow-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Empty State -->
        <div *ngIf="userSessions.length === 0" class="empty-state">
          <div class="empty-state-icon">
            <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
              <circle cx="32" cy="32" r="32" fill="#F5F5F5"/>
              <path d="M32 16V32L40 40" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3 class="empty-state-title">{{ 'noSessionsYet' | i18n }}</h3>
          <p class="empty-state-description">{{ 'createYourFirstSession' | i18n }}</p>
          <button class="create-first-session-button" (click)="onNewSession()">
            {{ 'createFirstSession' | i18n }}
          </button>
        </div>
      </div>

      <!-- Back Button -->
      <div class="back-section">
        <button class="back-button" (click)="onBackToTcoConverter()">
          <svg class="arrow-icon-left" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M15.8333 10H4.16666M4.16666 10L9.16666 5M4.16666 10L9.16666 15" stroke="currentColor" stroke-width="1.67" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>{{ 'backToTcoConverter' | i18n }}</span>
        </button>
      </div>
    </div>
  </div>
</div>
